<!DOCTYPE html>
<html>
<head>
    <title>DMS</title>
    <style>
        body { font-family: Arial; margin: 0; padding: 20px; }
        .nav { background: #333; padding: 10px; }
        .nav a { color: white; margin-right: 15px; text-decoration: none; }
        .container { max-width: 1200px; margin: 20px auto; }
        .alert { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .alert-success { background: #d4edda; color: #155724; }
        .alert-error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
  <div class="nav-links">
    {% if user.is_authenticated %}
        <!-- Common links for all authenticated users -->
        <a href="{% url 'accounts:dashboard' %}">Dashboard</a>
        <a href="{% url 'documents:my_documents' %}">My Documents</a>
        <a href="{% url 'documents:upload' %}">Upload</a>
        <a href="{% url 'search:search' %}">Search</a>
        
        <!-- Staff/Admin/Manager links -->
        {% if user.is_staff or user.profile.role == 'admin' or user.profile.role == 'manager' %}
        <a href="{% url 'access:user_list' %}">Users</a>
        {% endif %}
        
        <!-- Admin only links -->
        {% if user.is_superuser or user.profile.role == 'admin' %}
        <a href="{% url 'access:admin_dashboard' %}">Admin</a>
        {% endif %}
        
        <!-- Reviewer links -->
        {% if user.is_staff or user.profile.role == 'reviewer' or user.profile.role == 'admin' %}
        <a href="{% url 'review:dashboard' %}">Review</a>
        {% endif %}
        
        <!-- Profile and Logout (for everyone) -->
        <a href="{% url 'access:my_profile' %}">Profile</a>
        <a href="{% url 'accounts:logout' %}">Logout ({{ user.username }})</a>
    {% else %}
        <a href="{% url 'accounts:login' %}">Login</a>
        <a href="{% url 'accounts:register' %}">Register</a>
    {% endif %}
</div>
    <div class="container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        {% block content %}{% endblock %}
    </div>
</body>
</html>